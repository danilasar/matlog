\chapter{19 апреля. Логическое следование алгебры предикатов}
\section{Логическое следование формул алгебры предикатов}
$\vDash \Phi$ --- истинное утверждение при любой интерпретации.

$M = (M, \{P_M\}, \alpha)$, где $M \neq \varnothing$, $\alpha: X \to M$. --- интерпретация.

$\Phi_1, \dots, \Phi \vDash \Phi_\alpha$ --- из истинности $\Phi_1, \dots, \Phi$ следует истинность $\Phi_\alpha$ при любой интерпретации.

В алгебре высказываний у нас была единственная интерпретация $M = \{0,1\}$.

С помощью логического следования формул определяются общие способы доказательства взаимосвязи между истинностными значениями утверждений посредством исследования формальной структуры этих утверждений.

\dftion Формула $\Phi$ алгебры предикатов называется {\it логическим следствием } формулы $\Psi$, если $\vDash \Psi \then \Phi$, т. е. в любой интерпретации $M$ формула $\Phi$ истинна при любой оценке предметных переменных $\alpha$, при которой истинна формула $\Psi$.

\dftion Формула $\Phi$ называется {\it логическим следствием множества формул $\Gamma$}, если в любой интерпретации $M$ формула $\Phi$ истинна при любой оценке предметных переменных $\alpha$, при которой истинны все формулы из $\Gamma$.

Такое логическое следствие обозначается $\Gamma \vDash \Phi$ и называется {\it логическим следованием}. При этом формулы из $\Gamma$ называются {\it посылками} и формула $\Phi$ --- следствием логического высказывания.

\dftion Множество формул $\Gamma$ называется {\it проитиворечивым}, если из него логически следует любая ( в том числе и тождественно ложная) формула $\Phi$. Символически это записывается $\Gamma \vDash $.

\underline{Лемма 1 (Критерии логического следования).} Условие $\Phi_1, \dots, \Phi_m \vDash \Phi$ равносильно каждому из следующих условий:
\begin{itemize}
    \item $\Phi_1 \land \dots \land \Phi_m \vDash \Phi$
    \item $\vDash \Phi_1 \land \dots \land \Phi_m \then \Phi$
    \item $\Phi_1, \dots, \Phi_m, \neg \Phi \vDash $
\end{itemize}

В частности, $\Phi \vDash \Psi$ равносильно $\vDash \Phi \then \Psi$. Отсюда также следует, что $\Phi = \Psi$ Равносильно тому, что $\Phi \vDash \Psi$, $\Psi \vDash \Phi$.

\section{Проблема общезначимости формул алгебры предикатов}
Определение истинности формул вводится с помощью их интерпретаций в конкретных допустимых множествах $M$ с первоначально фиксированными предикатными символами этих формул. Так как множество таких интерпретаций бесконечно (они могут иметь как конечные, так и бесконечные области интерпретации), то в этом случае проверить тождественную истинность рассматриваемой формулы на всех таких интерпретациях практически невозможно.

Альтернативный подход к проверке общезначимости формулы $\Phi$ основывается на попытке построения интерпретации, опровергающей данную формулу.

Если из предположения существоввания такой интерпретации получается противоречие, то формула $\Phi$ общезначима. В противном случае на основе полученных условий для входящих в формулу $\Phi$ предикатов, алгебраических операций и констант строится интерпретация, опровергающая эту формулу $\Phi$, и в этом случае формула $\Phi$ не является общезначимой.

\section{Автоматическое доказательство теорем}
Мы будем проверять тождественную ложность. Суть в том, что мы будем идти через метод от противного.

Существуют алгоритмы поиска доказательства, которые для общезначимых формул подтверждают, что эти формулы общезначимы, и для необщезначимых формул в общем случае не заканчивают свою работу.

Автоматические системы построения доказательств называют {\it пруверами} и предъявляют им следующие требования:
\begin{enumerate}
    \item корректность
    \item полнота 
    \item эффективность
\end{enumerate}

Примером такого алгоритма является метод резолюций. Отсюда начинается теория алгоритмов.

Альтернатива методу резолюций --- алгоритм проверки.

%\sout{Ых, не видно нихера...}

\section{Метод резолюций в алгебре предикатов}
Первым шагом метода резолюций в алгебре предикатов является приведение рассматриваемой формулы к специальным нормальным формам, которые аналогичны ДНФ и КНФ для формул алгебры высказываний (далее АВ).

Формула исчисления предикатов $\Phi$ находится {\it в предваренной или пренексной нормальной форме} (далее ПНФ), если она имеет вид $(K_1 x_1)\dots(K_n x_n)\Psi$, где $K_1,\dots,K_n$ --- некоторые кванторы и $\Psi$ --- бескванторная формула, находящаяся в КНФ. При этом последовательность кванторов $(K_1 x_1)\dots(K_n x_n)$ называется {\it кванторной приставкой} и формула $\Psi$ называется {\it конъюнктивным ядром} формулы $\Phi$.

\underline{Теорема 1.} Любая формула исчисления предикатов $\Phi$ логически равносильна формуле $\Phi'$, находящейся в ПНФ.

Такая формула $\Phi'$ называется {\it пренексной нормальной формулой} (сокращённо ПНФ) формулы $\Phi$.

\subsection{Элиминация кванторов существования}

Пусть замкнутая формула исчисления предикатов $\Phi$ назодится в ПНФ:
\begin{equation*}
    \Phi = (K_1 x_1)\dots(K_n x_n)\Psi,
\end{equation*}
где $K_1,\dots,K_n$ --- некоторые кванторы и $\Psi = \Psi(x_1,\dots,x_n)$ --- конъюнктивное ядро формулы $\Phi$, т. е. бескванторная формула со свободными переменными $x_1,\dots,x_n$, находящимся в КНФ.

В кванторной приствке формулы $\Phi$ можно удалить любой квантор существования $(\exists x_s)$ для $1 \leq s \leq n$ по следующему правилу:
\begin{enumerate}
    \item Если левее квантора существования $(\exists x_s)$ в формуле $\Phi$ не стоит никакой квантор обзности, то выбираем новый предметный символ $c$, заменяем этим символом $c$ все вхождения переменной $x_s$ в конъюнктивное ядро формулы $\Phi$ и вычёркиванием $(\exists x_s)$ из кванторной приставки формулы $\Phi$;
    \item если же левее квантора существования стоят кванторы общности $(\forall x_{s_1})\dots(\forall x_{s_n})$ для значений $1 \leq s_1 \leq \dots \leq s_m \leq s$, то выбираем $m$-арный функциональный символ $f$, заменяем все вхождения переменной $x_s$ в конъюнктивное ядро формулы $\Phi$ выражением $f(x_{s_1},\dots,x_[s_n])$ и вычёркиванием $(\exists x_s)$ из кванторной приставки формулы $\Phi$
\end{enumerate}

В результате такой замены всех кванторов существования в формуле $\Phi$ получим замкнутую ПНФ $\Phi'$, кванторная приставка которой получается из кванторной приставки формулы $\Phi$ удалением всех кванторов существования и которая содержит все новые символы --- функциональные или предметные.

При этом формула $\Phi$ выполнима или противоречива одновременно с формулой $\Phi'$.

Рассмотренный приём удаления квантора был введён Скулемом и называется {\it скулемизацией формул}. Вводимые в процессе скулемизации новые функциональные и предметные символы называются {\it функторами Скулема} или {\it скулемовскими функциями}.

Получннную в результате скулемизации замкнутую формулу $\Phi'$ называют {\it скулевской стандартной формулой} (ССФ).

\underline{Теорема 2.} Любая замкнутая формула исчисления предикатов $\Phi$ эффективно преобразуется (с помощью определённого алгоритма) в логически эквивалентную ей скулемовскую стандартную форму $\Phi'$, которая называется {\it скулемовской стандартной формой} (сокращённо ССФ) формулы $\Phi$.

При этом формула $\Phi$ выполнима или противоречива одновременно с её ССФ.

\underline{Пример.} Результатом скулемизации формулы
\begin{equation*}
    (\forall x)(\exists z)(\forall y)(\exists w)((\neg P(x) \lor R(y)) \land P(z) \land \neg R(w))
\end{equation*}
является следующая ССФ
\begin{equation*}
    (\forall x)(\forall y)\Bigg(\Big(\neg P(x) \lor R(y)\Big) \land P(f(x)) \lor \neg R(g(x, y))\Bigg)
\end{equation*}

\section{Метод Эрбрана}
Это метод доказательства противоречивости множества дизъюнктов посредством невозможности построения интерпретации в специальном множестве $H$ ({\it универсум Эрбрана}), при котором все ... истинны.

Эрбранов универсум --- это множество, состоящее из постоянных символов и функциональных выражений для этих символов.

Если мы доказываем, что в таком универсуме нет интерпретаций, мы доказываем, что множество $S$ противоречиво. \newline

Доказательство тождественной истинности замкнутой формулы  равносильно доказательству противоречивости её отрицания $\neg \Phi$.

Далее рассматривается задача доказательства противоречивости замкнутой формулы $\Phi$.

{\bf Правило 1.} Противоречивость замкнутой формулы алгебры предикатов $\Phi$ равносильна противоречивости её скулемовской стандартной формы $\Phi'$, которая является универсально замкнутой формулой
\begin{equation*}
    \Phi' = (\forall_{i_1}x_{i_1})\dots(\forall_{i_k}x_{i_k})\Psi
\end{equation*}
с конъюнктивным ядром $\Psi = D_1\land\dots\land D_m$, где $D_1,\dots,D_m$ --- некоторые дизъюнкты литер алгебры предикатов.

С другой стороны, универсально замкнутая формула $\Phi'$ противоречива в том и только в том случае, когда она невыполнима.

Доказательство противоречивости (т. е. невыполнимости) замкнутой формулы $\Phi$ сводится к доказательству невыполнимости множества дизъюнктов $S = \{D_1,\dots,D_m\}.$

Эрбран доказал, что при доказательстве невыполнимости такого множества формул $S$ можно ограничиться рассмотрением интерпретаций в одной специальной области интерпретации, которая называется эрбрановским универсумом и состоит из функциональных выражений от констант из $S$.

{\bf Правило 2.} Доказательство противоречивости формул алгебры предикатов сводится к доказательству противоречивости конечных множеств дизъюнктов $S$.

Для этого строится резолютивный вывод 0 из множества дизъюнктов $S$.

Резолютивный вывод --- это последовательность дизъюнкций, в которой строится резольвента формул. Резольвента применялась к двум дизъюнктам. Один дизъюнкт имеет пропорциональную переменную $x$, а другой имеет отрицание $\neg x$. Эти переменные называются контранными (противоположными) литерами (в алгебре высказываний литерами являются переменные или их отрицания). Применение резольвенты есть сокращение контранных литер.

\section{Унификаторы формул}

\underline{Пример.}

В алгебре высказываний контрарные литеры $X, \neg X$.

В алгбере предикатов литеры $P(a, y), \neg P(x,f(b))$ не являются контрарными, но при замере переменных $\theta = \left(\begin{matrix}x & y \\ a & f(b)\end{matrix}\right)$ получаем контрарные литеры $P(a, f(b)), \lnot P(a, f(b))$.

\dftion Элементы области интерпретации могут описываться не только с помощью предметных переменных, но и с помощью так называемых \textbf{термов} --- специальных выражений языка, которые индуктивно определяются следующим образом:
\begin{itemize}
    \item все предметные переменные и предеметные символы формулы являются термами,
    \item если $f$ --- $n$-арный функциональный символ формулы и $t_1,\dots,t_n$ --- термы, то выражение $f(t_1,\dots,t_n)$ является термом.
\end{itemize}

Пусть $S$ --- множество формул алгебры предикатов.

Обозначим $X_S, C_S$ и $F_S$ соответственно множества всех предметных переменных, предметных символов и функциональных символов, встреечающихся в формулах множества $S$. Пусть $A_S$ --- объединение множеств $X_S$ и $C_S$ с добавленным новым постоянным символом $a$, если $C_S = \varnothing$.

На множестве $A_S$ определяется множество всех термов $T_S$ множества $S$ с функциональными символами из множества $F_S$. В частности, каждая переменная $x \in X_S$ является термом из множества $T_S$ и, значит, $X_S \subset T_S$.

Отображения $\theta$ множества переменных $X_S$ в множество термов $T_S$ называются {\it подстановками} и обозначаются
\begin{equation*}
    \theta = \left(\begin{matrix}
        x_1 & \dots & x_n \\ t_1 & \dots & t_n
    \end{matrix}\right),
\end{equation*}
где $t_i = \theta(x_i)$ для всех $x_i \in dom\, \theta$, удовлетворяющих $\theta(x_i) \neq x_i (i = \overline{1,n})$.

Заменять таким образом мы можем только переменные. Мы берём переменные и заменяем их на термы.